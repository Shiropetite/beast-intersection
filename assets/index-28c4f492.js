var Y=Object.defineProperty;var M=(d,e,t)=>e in d?Y(d,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[e]=t;var r=(d,e,t)=>(M(d,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const R of c.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&i(R)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();const s={music:1,sound:.1,up:"z",down:"s",left:"q",right:"d",act:"e"};class K{constructor(){r(this,"listeners",[])}register(e){this.listeners.push(e)}unregister(e){this.listeners=this.listeners.filter(t=>t!=e)}getListeners(){return this.listeners}}const C=class extends K{constructor(){super()}static get(){return this.instance||(this.instance=new C),this.instance}raise(e){if(e.repeat)return;let t=!1;C.get().getListeners().forEach(i=>{t||(t=i.onKeydown(e.key))})}};let v=C;r(v,"instance");const L=class extends K{constructor(){super()}static get(){return this.instance||(this.instance=new L),this.instance}raise({key:e}){let t=!1;L.get().getListeners().forEach(i=>{t||(t=i.onKeyPressed(e))})}};let u=L;r(u,"instance");const x=class extends K{constructor(){super()}static get(){return this.instance||(this.instance=new x),this.instance}raise({key:e}){let t=!1;x.get().getListeners().forEach(i=>{t||(t=i.onKeyup(e))})}};let F=x;r(F,"instance");var n=(d=>(d[d.KEY=0]="KEY",d[d.SLIDER=1]="SLIDER",d[d.REDIRECT=2]="REDIRECT",d))(n||{});const w=class{static get(){return this.instance||(this.instance=new w),this.instance}build(){let e=`<div class="popup-container">
      <div class="popup">
        <div class="mb-16">Voulez vous autoriser cette page √† utiliser du son ?</div>
        <div class="row justify-center gap-12 ">
          <div id="yes" class="button">Oui</div>
          <div id="no" class="button">Non</div>
        </div>
      </div>
    </div>`;b.innerHTML=e}select(e){document.getElementById(e).classList.add("active")}unselect(e){document.getElementById(e).classList.remove("active")}};let o=w;r(o,"instance");const D=class{static get(){return this.instance||(this.instance=new D),this.instance}build(e){let t=`<div class="camera">
      <div class="fit column justify-center items-center gap-16">`;e.forEach(i=>{i.type===n.SLIDER&&(t+=`<div id="${i.name}" class="input">
          <div>${i.name}</div>
          <input id="${i.name}-volume" class="slider" type="range"/>
        </div>`),i.type===n.KEY&&(t+=`<div id="${i.name}" class="input">
          <div>${i.name}</div>
          <input id="input-${i.name}" class="key-input" maxlength="1" />
        </div>`),i.type===n.REDIRECT&&(t+=`<div id="${i.name}" class="button">Confirmer</div>`)}),t+="</div></div>",b.innerHTML=t}select(e){document.getElementById(e).classList.add("active")}unselect(e){document.getElementById(e).classList.remove("active")}enterEditMode(e){document.getElementById(`input-${e}`).classList.add("edition")}exitEditMode(e){document.getElementById(`input-${e}`).classList.remove("edition")}updateSlide(e,t){const i=document.getElementById(`${e}-volume`);i.value=t}updateKey(e,t){const i=document.getElementById(`input-${e}`);i.value=t}};let l=D;r(l,"instance");const B=class{static get(){return this.instance||(this.instance=new B),this.instance}build(){let e=`<div class="camera">
      <div class="fit column justify-center items-center gap-16">
        <div class="title">üçÉ Beast Intersection üçÉ</div>
        <div id="play" class="button">Jouer</div>
        <div id="settings" class="button">Param√®tres</div>
      </div>
    </div>`;b.innerHTML=e}select(e){document.getElementById(e).classList.add("active")}unselect(e){document.getElementById(e).classList.remove("active")}};let h=B;r(h,"instance");const f=class{constructor(){r(this,"currentFieldIndex");r(this,"fields",[{name:"yes",type:n.REDIRECT},{name:"no",type:n.REDIRECT}]);this.currentFieldIndex=0}static get(){return this.instance||(this.instance=new f),this.instance}start(){o.get().build(),o.get().select(this.getCurrentField().name),u.get().register(f.get())}stop(){u.get().unregister(f.get())}onKeyPressed(e){return e===s.left&&this.currentFieldIndex>0?(this.navigate(this.currentFieldIndex-1),!0):e===s.right&&this.currentFieldIndex<this.fields.length-1?(this.navigate(this.currentFieldIndex+1),!0):e===s.act&&this.getCurrentField().name==="yes"?(g.get().play("button-click"),this.stop(),m.get().start(),!0):e===s.act&&this.getCurrentField().name==="no"?(s.music=0,s.sound=0,this.stop(),m.get().start(),!0):!1}navigate(e){o.get().unselect(this.getCurrentField().name),this.currentFieldIndex=e,o.get().select(this.getCurrentField().name)}getCurrentField(){return this.fields[this.currentFieldIndex]}};let y=f;r(y,"instance");const p=class{constructor(){r(this,"currentFieldIndex");r(this,"fields",[{name:"music",type:n.SLIDER},{name:"sound",type:n.SLIDER},{name:"up",type:n.KEY},{name:"left",type:n.KEY},{name:"right",type:n.KEY},{name:"down",type:n.KEY},{name:"confirm",type:n.REDIRECT}]);r(this,"isEditingKeyField");this.currentFieldIndex=0,this.isEditingKeyField=!1}static get(){return this.instance||(this.instance=new p),this.instance}start(){l.get().build(this.fields),l.get().select(this.getCurrentField().name),this.fields.forEach(e=>{e.type===n.SLIDER&&l.get().updateSlide(e.name,s[e.name]*100),e.type===n.KEY&&l.get().updateKey(e.name,s[e.name])}),u.get().register(p.get())}stop(){u.get().unregister(p.get())}onKeyPressed(e){if(!this.isEditingKeyField){if(e===s.up&&this.currentFieldIndex>0)return this.navigate(this.currentFieldIndex-1),!0;if(e===s.down&&this.currentFieldIndex<this.fields.length-1)return this.navigate(this.currentFieldIndex+1),!0}if(e==="Enter"&&this.getCurrentField().type===n.KEY)return this.switchIsEditing(),!0;if(this.isEditingKeyField&&this.getCurrentField().type===n.KEY)return this.editKeyField(e),!0;if(this.getCurrentField().type===n.SLIDER){if(e===s.left)return this.editSliderField(s[this.getCurrentField().name]-.1);if(e===s.right)return this.editSliderField(s[this.getCurrentField().name]+.1)}return e===s.act&&this.getCurrentField().type===n.REDIRECT&&(this.stop(),g.get().play("button-click"),m.get().start()),!1}switchIsEditing(){this.isEditingKeyField=!this.isEditingKeyField,this.isEditingKeyField?l.get().enterEditMode(this.getCurrentField().name):l.get().exitEditMode(this.getCurrentField().name)}editKeyField(e){s[this.getCurrentField().name]=e,l.get().updateKey(this.getCurrentField().name,s[this.getCurrentField().name])}editSliderField(e){return e<0||e>1?!1:(s[this.getCurrentField().name]=e,l.get().updateSlide(this.getCurrentField().name,s[this.getCurrentField().name]*100),!0)}navigate(e){l.get().unselect(this.getCurrentField().name),this.currentFieldIndex=e,l.get().select(this.getCurrentField().name),g.get().play("button-hover")}getCurrentField(){return this.fields[this.currentFieldIndex]}};let I=p;r(I,"instance");const $=class{static get(){return this.instance||(this.instance=new $),this.instance}play(e){const t=new Audio(`/sound-effects/${e}.mp3`);t.volume=s.sound,t.play()}};let g=$;r(g,"instance");const E=class{constructor(){r(this,"currentFieldIndex");r(this,"fields",[{name:"play",type:n.REDIRECT},{name:"settings",type:n.REDIRECT}]);this.currentFieldIndex=0}static get(){return this.instance||(this.instance=new E),this.instance}start(){h.get().build(),h.get().select(this.getCurrentField().name),u.get().register(E.get())}stop(){u.get().unregister(E.get())}onKeyPressed(e){return e===s.up&&this.currentFieldIndex>0?(this.navigate(this.currentFieldIndex-1),!0):e===s.down&&this.currentFieldIndex<this.fields.length-1?(this.navigate(this.currentFieldIndex+1),!0):e===s.act&&this.getCurrentField().name==="settings"?(g.get().play("button-click"),this.stop(),I.get().start(),!0):!1}navigate(e){h.get().unselect(this.getCurrentField().name),this.currentFieldIndex=e,h.get().select(this.getCurrentField().name),g.get().play("button-hover")}getCurrentField(){return this.fields[this.currentFieldIndex]}};let m=E;r(m,"instance");const b=document.getElementById("app");y.get().start();window.addEventListener("keypress",u.get().raise);window.addEventListener("keyup",F.get().raise);window.addEventListener("keydown",v.get().raise);
